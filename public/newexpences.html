<!doctype html>
<html lang="en">
 
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
    <link href="assets/vendor/fonts/circular-std/style.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/libs/css/style.css">
    <link rel="stylesheet" href="assets/vendor/fonts/fontawesome/css/fontawesome-all.css">
    <link rel="stylesheet" href="assets/vendor/charts/chartist-bundle/chartist.css">
    <link rel="stylesheet" href="assets/vendor/charts/morris-bundle/morris.css">
    <link rel="stylesheet" href="assets/vendor/fonts/material-design-iconic-font/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/vendor/charts/c3charts/c3.css">
    <link rel="stylesheet" href="assets/vendor/fonts/flag-icon-css/flag-icon.min.css">
    <title>Duen Hotel Admin</title>
    <style>
        .expense-date {
          font-weight: bold;
        }
      </style>
</head>

<body>
    <!-- ============================================================== -->
    <!-- main wrapper -->
    <!-- ============================================================== -->
    <div class="dashboard-main-wrapper">
        <!-- ============================================================== -->
        <!-- navbar -->
        <!-- ============================================================== -->
        <div class="dashboard-header">
            <nav class="navbar navbar-expand-lg bg-white fixed-top">
                <a class="navbar-brand" href="home.html">DUEN-HOTEL</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse " id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto navbar-right-top">
                       
                        <li class="nav-item dropdown notification">
                            <a class="nav-link nav-icons" href="#" id="navbarDropdownMenuLink1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-fw fa-bell"></i> <span class="indicator"></span></a>
                            <ul class="dropdown-menu dropdown-menu-right notification-dropdown">
                               
                                <li>
                                    <div class="list-footer"> <a href="#">View all notifications</a></div>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown connection">
                            <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="fas fa-fw fa-plus"></i> </a>
                            <ul class="dropdown-menu dropdown-menu-right connection-dropdown">
                               
                                <li class="connection-list">
                                    <div class="conntection-footer"><a href="reservation.html">Reservations</a></div>
                                        
                                </li>
                                <li class="connection-list">
                                    <div class="conntection-footer"><a href="order.html">Drink-Sales</a></div>
                                        
                                </li>
                                <li class="connection-list">
                                    <div class="conntection-footer"><a href="foodorder.html">Food-Order</a></div>
                                        
                                </li>
                                <li class="connection-list">
                                    <div class="conntection-footer"><a href="newexpences.html">Expenses</a></div>
                                        
                                </li>
                               
                            </ul>
                        </li>
                        <li class="nav-item dropdown nav-user">
                            <a class="nav-link nav-user-img" href="#" id="navbarDropdownMenuLink2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="assets/images/iconuser (2).png" alt="" class="user-avatar-md rounded-circle"></a>
                            <div class="dropdown-menu dropdown-menu-right nav-user-dropdown" aria-labelledby="navbarDropdownMenuLink2">
                                <div class="nav-user-info">
                                    <h5 class="mb-0 text-white nav-user-name" id="username"></h5>
                                    <span class="status"></span><span class="ml-2" id="email"></span>
                                </div>
                                <a class="dropdown-item" href="#"><i class="fas fa-user mr-2"></i>Account</a>
                                <a class="dropdown-item" href="#"><i class="fas fa-cog mr-2"></i>Setting</a>
                                <a id="logout" class="dropdown-item" href="#"><i class="fas fa-power-off mr-2"></i>Logout</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!-- ============================================================== -->
        <!-- end navbar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- left sidebar -->
        <!-- ============================================================== -->
        <div class="nav-left-sidebar sidebar-dark">
            <div class="menu-list">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="d-xl-none d-lg-none" href="home.html">Dashboard</a>
                    <button class="navbar-toggler" type="button" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav flex-column">
                            <li class="nav-divider">
                                Menu
                            </li>
                            <li class="nav-item ">
                                <a class="nav-link active" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-1" aria-controls="submenu-1"><i class="fa fa-fw fa-user-circle"></i>Dashboard <span class="badge badge-success">6</span></a>
                                <div id="submenu-1" class="collapse submenu" style="">
                                    <ul class="nav flex-column">
                                        <li class="nav-item">
                                            <a class="nav-link" href="home.html"  aria-expanded="false" data-target="#submenu-1-2" aria-controls="submenu-1-2">DUEN-HOTEL Dashboard</a>
                                           
                                        </li>
                                        
                                       
                                    </ul>
                                </div>
                            </li>
                            
                          

                            <li class="nav-divider">
                                Features
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-6" aria-controls="submenu-6"><i class="fas fa-fw fa-file"></i> Pages </a>
                                <div id="submenu-6" class="collapse submenu" style="">
                                    <ul class="nav flex-column">
                                      
                                        <li class="nav-item">
                                            <a class="nav-link" href="totalreport.html">Finance</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="stockmanagement.html">Stock</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="restaurant.html">Restaurant</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="rooms.html">Rooms</a>
                                        </li>
                                       
                                    </ul>
                                </div>
                            </li>
                         
                         
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-10" aria-controls="submenu-10"><i class="fas fa-f fa-folder"></i>Repport</a>
                                <div id="submenu-10" class="collapse submenu" style="">
                                    <ul class="nav flex-column">
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">On Sales</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">On Products</a>
                                        </li>
                                        
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">On Expense</a>
                                        </li>

                                        <li class="nav-item">
                                            <a class="nav-link" href="#">On Payroll</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#"  aria-expanded="false" data-target="#submenu-8" aria-controls="submenu-8"><i class="fas fa-fw fa-upload"></i>Update Data</a>
                                
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#"  aria-expanded="false" data-target="#submenu-8" aria-controls="submenu-8"><i class="fas fa-circle-notch"></i>Reload Data</a>
                                
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- end left sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- wrapper  -->
        <!-- ============================================================== -->
        <div class="dashboard-wrapper">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content ">
                    <!-- ============================================================== -->
                    <!-- pageheader  -->
                    <!-- ============================================================== -->
                    <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="page-header">
                                <h2 class="pageheader-title">Duen Dashboard </h2>
                                <p class="pageheader-text">Nulla euismod urna eros, sit amet scelerisque torton lectus vel mauris facilisis faucibus at enim quis massa lobortis rutrum.</p>
                                <div class="page-breadcrumb">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#" class="breadcrumb-link">Dashboard</a></li>
                                            <li class="breadcrumb-item active" aria-current="page">Duen-Hotel Dashboard</li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- end pageheader  -->
                    <!-- ============================================================== -->
                    <div class="ecommerce-widget">

                        <h1>Enregistrement des Dépenses</h1>

                        <!-- Formulaire pour saisir les informations sur la dépense -->
                        <form id="expenseForm">
                          <label for="expenseName">Nom de la Dépense:</label>
                          <input type="text" id="expenseName" required><br>
                        
                          <label for="expensePrice">Prix:</label>
                          <input type="number" id="expensePrice" required><br>
                        
                          <label for="expenseDate">Date:</label>
                          <input type="date" id="expenseDate" required><br>
                        
                          <button class="btn btn-primary" type="button" onclick="addExpense()">Enregistrer la Dépense</button>
                        </form>
                        <h1>Liste des Dépenses</h1>

                        <!-- Div pour afficher la liste des dépenses -->
                        <div id="expensesList"></div>  
            </div>
            <!-- ============================================================== -->
        
    <script src="https://konbitmarket.netlify.app/js/js/firebase-app.js"></script>
<script src="https://konbitmarket.netlify.app/js/js/auth.js"></script>
<script src="https://konbitmarket.netlify.app/js/js/firebase-firestore.js"></script>
<script src="firebase-config.js"></script>


    
<script>
    // Retrieve user details from localStorage
    const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));

    if (loggedInUser) {
        document.getElementById('username').textContent = loggedInUser.name;
        document.getElementById('email').textContent = loggedInUser.email;
    } else {
        // Handle case where no user is logged in
        console.log('No user logged in.');
    }
</script>

<script>
    // Récupérer l'élément du bouton de déconnexion
const logoutButton = document.getElementById('logout');

// Écouter l'événement de clic sur le bouton de déconnexion
logoutButton.addEventListener('click', function() {
    // Effacer les données de l'utilisateur du localStorage lors de la déconnexion
    localStorage.removeItem('loggedInUser');

    // Rediriger vers la page de connexion après la déconnexion
    window.location.href = 'index.html'; // Remplacez 'login.html' par la page de connexion
});

</script>

<script>
 
  
  
    // Référence à la collection "expenses" dans Firestore
    const expensesCollection = firebase.firestore().collection('expenses');
  
    // Fonction pour ajouter une dépense dans Firestore
    function addExpense() {
      const expenseName = document.getElementById('expenseName').value;
      const expensePrice = parseFloat(document.getElementById('expensePrice').value);
      const expenseDate = document.getElementById('expenseDate').value;
  
      // Vérification des champs non vides
      if (expenseName && !isNaN(expensePrice) && expenseDate) {
        // Enregistrement de la dépense dans Firestore
        expensesCollection.add({
          name: expenseName,
          price: expensePrice,
          date: expenseDate
        })
        .then(() => {
          alert('Dépense enregistrée avec succès!');
          // Effacer le formulaire après l'enregistrement
          document.getElementById('expenseForm').reset();
        })
        .catch(error => {
          console.error('Erreur lors de l\'enregistrement de la dépense: ', error);
          alert('Une erreur s\'est produite. Veuillez réessayer.');
        });
      } else {
        alert('Veuillez remplir tous les champs correctement.');
      }
    }
  </script>
  <script>
    
   
  
    // Référence à la collection "expenses" dans Firestore
    const expensesCollectiondisplay = firebase.firestore().collection('expenses');
  
    // Fonction pour récupérer et afficher les dépenses depuis Firestore
    function displayExpenses() {
      // Div pour afficher la liste des dépenses
      const expensesListDiv = document.getElementById('expensesList');
      
      // Effacer le contenu précédent
      expensesListDiv.innerHTML = '';
  
      // Récupérer toutes les dépenses triées par date (du plus récent au plus ancien)
      expensesCollectiondisplay.orderBy('date', 'desc').get()
        .then(querySnapshot => {
          let currentDay = null;
          let totalAmount = 0;
  
          // Parcourir chaque dépense
          querySnapshot.forEach(doc => {
            const expense = doc.data();
  
            // Vérifier si la date a changé
            if (expense.date !== currentDay) {
              // Afficher la date en gras en tant que tête de section
              expensesListDiv.innerHTML += `<h3 class="expense-date">${expense.date}</h3>`;
              currentDay = expense.date;
              totalAmount = 0; // Réinitialiser le total pour le nouveau jour
            }
  
            // Afficher les détails de la dépense
            expensesListDiv.innerHTML += `<p>${expense.name} - ${expense.price}</p>`;
            
            // Ajouter le montant à totalAmount pour le calcul du total
            totalAmount += expense.price;
          });
  
          // Afficher le total en bas
          expensesListDiv.innerHTML += `<h3>Total: ${totalAmount}</h3>`;
        })
        .catch(error => {
          console.error('Erreur lors de la récupération des dépenses: ', error);
          alert('Une erreur s\'est produite lors de la récupération des dépenses. Veuillez réessayer.');
        });
    }
  
    // Appeler la fonction pour afficher les dépenses lors du chargement de la page
    displayExpenses();
  </script>
  
   
    <!-- jquery 3.3.1 -->
    <script src="assets/vendor/jquery/jquery-3.3.1.min.js"></script>
    <!-- bootstap bundle js -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <!-- slimscroll js -->
    <script src="assets/vendor/slimscroll/jquery.slimscroll.js"></script>
    <!-- main js -->
    <script src="assets/libs/js/main-js.js"></script>
    <!-- chart chartist js -->
    <script src="assets/vendor/charts/chartist-bundle/chartist.min.js"></script>
    <!-- sparkline js -->
    <script src="assets/vendor/charts/sparkline/jquery.sparkline.js"></script>
    <!-- morris js -->
    <script src="assets/vendor/charts/morris-bundle/raphael.min.js"></script>
    <script src="assets/vendor/charts/morris-bundle/morris.js"></script>
    <!-- chart c3 js -->
    <script src="assets/vendor/charts/c3charts/c3.min.js"></script>
    <script src="assets/vendor/charts/c3charts/d3-5.4.0.min.js"></script>
    <script src="assets/vendor/charts/c3charts/C3chartjs.js"></script>
    <script src="assets/libs/js/dashboard-ecommerce.js"></script>
</body>
 
</html>